<form class="bg-mode position-relative px-3 px-sm-4 pt-4 mb-4 mb-sm-0" [formGroup]="findTicketForm"
    (ngSubmit)="findTicket()">

    <!-- Svg decoration -->
    <figure class="position-absolute top-0 start-0 h-100 ms-n2 ms-sm-n1">
        <svg class="h-100" viewBox="0 0 12.9 324" style="enable-background:new 0 0 12.9 324;">
            <path class="fill-mode"
                d="M9.8,316.4c1.1-26.8,2-53.4,1.9-80.2c-0.1-18.2-0.8-36.4-1.2-54.6c-0.2-8.9-0.2-17.7,0.8-26.6 c0.5-4.5,1.1-9,1.4-13.6c0.1-1.9,0.1-3.7,0.1-5.6c-0.2-0.2-0.6-1.5-0.2-3.1c-0.3-1.8-0.4-3.7-0.4-5.5c-1.2-3-1.8-6.3-1.7-9.6 c0.9-19,0.5-38.1,0.8-57.2c0.3-17.1,0.6-34.2,0.2-51.3c-0.1-0.6-0.1-1.2-0.1-1.7c0-0.8,0-1.6,0-2.4c0-0.5,0-1.1,0-1.6 c0-1.2,0-2.3,0.2-3.5H0v11.8c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1V31c3.3,0,6.1,2.7,6.1,6.1S3.3,43.3,0,43.3v6.9 c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1 s-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9 c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1 c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.7,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9 c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.7,6.1,6.1 c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1V324h9.5C9.6,321.4,9.7,318.8,9.8,316.4z" />
        </svg>
    </figure>

    <!-- Svg decoration -->
    <figure class="position-absolute top-0 end-0 h-100 rotate-180 me-n2 me-sm-n1">
        <svg class="h-100" viewBox="0 0 21 324" style="enable-background:new 0 0 21 324;">
            <path class="fill-mode"
                d="M9.8,316.4c1.1-26.8,2-53.4,1.9-80.2c-0.1-18.2-0.8-36.4-1.2-54.6c-0.2-8.9-0.2-17.7,0.8-26.6 c0.5-4.5,1.1-9,1.4-13.6c0.1-1.9,0.1-3.7,0.1-5.6c-0.2-0.2-0.6-1.5-0.2-3.1c-0.3-1.8-0.4-3.7-0.4-5.5c-1.2-3-1.8-6.3-1.7-9.6 c0.9-19,0.5-38.1,0.8-57.2c0.3-17.1,0.6-34.2,0.2-51.3c-0.1-0.6-0.1-1.2-0.1-1.7c0-0.8,0-1.6,0-2.4c0-0.5,0-1.1,0-1.6 c0-1.2,0-2.3,0.2-3.5H0v11.8c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1V31c3.3,0,6.1,2.7,6.1,6.1S3.3,43.3,0,43.3v6.9 c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1 s-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9 c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1 c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.7,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9 c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.7,6.1,6.1 c0,3.4-2.8,6.1-6.1,6.1v6.9c3.3,0,6.1,2.8,6.1,6.1c0,3.4-2.8,6.1-6.1,6.1V324h9.5C9.6,321.4,9.7,318.8,9.8,316.4z" />
        </svg>
    </figure>

    <div class="row g-4 position-relative">

        <!-- Nav tabs START -->
        <div class="col-lg-6">
            <ul class="nav nav-pills nav-pills-dark" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-start rounded-0 mb-0"
                        [ngClass]="{'active': !formService.isRoundedTrip}" id="pills-one-way-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-one-way" type="button" role="tab" aria-selected="true"
                        (click)="oneway()">One Way </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-end rounded-0 mb-0"
                        [ngClass]="{'active': formService.isRoundedTrip}" id="pills-round-trip-tab"
                        data-bs-toggle="pill" data-bs-target="#pills-round-trip" type="button" role="tab"
                        aria-selected="false" (click)="roundTrip()">Round Trip</button>
                </li>
            </ul>
        </div>
        <!-- Nav tabs END -->
        <div class="col-lg-3 ms-auto">
            <div class="form-control-bg-light form-fs-md">
                <select formControlName="ticketClass" name="ticketclass" class="form-select" [ngClass]="{'is-invalid': findTicketForm.controls['ticketClass'].touched &&
                    findTicketForm.controls['ticketClass'].errors?.['required']}">
                    <option value="0" selected disabled>Select Class</option>
                    <option [value]="1">Economy</option>
                    <option [value]="2">Premium Economy</option>
                    <option [value]="3">Business</option>
                    <option [value]="4">First Class</option>
                </select>
                <div class="text-danger">
                    @if (findTicketForm.controls['ticketClass'].touched &&
                    findTicketForm.controls['ticketClass'].errors?.['required']) {
                    <span>Select Ticket Class</span>
                    }
                </div>
            </div>
        </div>

        <!-- Ticket Travelers -->
        <div class="col-lg-3 ms-auto">
            <div class="form-control-bg-light form-fs-md">
                <!-- js-choice -->
                <select class="form-select" formControlName="travellers" name="travellers" [ngClass]="{'is-invalid': findTicketForm.controls['travellers'].touched &&
                    findTicketForm.controls['travellers'].errors?.['required']}">
                    <option [value]="0" disabled>Select Travelers</option>
                    <option [value]="1">1</option>
                    <option [value]="2">2</option>
                    <option [value]="3">3</option>
                    <option [value]="4">4</option>
                    <option [value]="5">5</option>
                </select>
                <div class="text-danger">
                    @if (findTicketForm.controls['travellers'].touched &&
                    findTicketForm.controls['travellers'].errors?.['required']) {
                    <span>Select Travellers</span>
                    }
                </div>
            </div>
        </div>

        @if(isFormInvalid){
        <span class="text-danger required">Empty form can't be submitted</span>
        }
        <!-- Tab content START -->
        <div class="tab-content mt-4" id="pills-tabContent">
            <!-- One way tab START -->
            <div class="tab-pane fade" [ngClass]="{'show active': !formService.isRoundedTrip}" id="pills-one-way"
                role="tabpanel" aria-labelledby="pills-one-way-tab">
                <div class="row g-4">
                    <!-- Leaving From -->
                    <div class="col-md-6 col-lg-4 position-relative">
                        <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                            <!-- Input field -->
                            <label class="mb-1"><i class="bi bi-geo-alt me-2"></i>From</label>
                            <select class="form-select" name="departure" formControlName="departure"
                                data-search-enabled="true" [ngClass]="{'is-invalid': findTicketForm.controls['departure'].touched &&
                                findTicketForm.controls['departure'].errors?.['required']}">
                                <option [ngValue]="0" disabled>Select location</option>
                                @for (item of destinationList; track $index) {
                                <option [value]="item.id">{{item.name}}</option>
                                }
                            </select>
                            <div class="text-danger">
                                @if (findTicketForm.controls['departure'].touched &&
                                findTicketForm.controls['departure'].errors?.['required']) {
                                <span>Select Location</span>
                                }

                            </div>
                        </div>

                        <!-- Auto fill button -->
                        <div class="btn-flip-icon mt-3 mt-md-0">
                            <button class="btn btn-white shadow btn-round mb-0"><i
                                    class="fa-solid fa-arrow-right"></i></button>
                        </div>
                    </div>

                    <!-- Going To -->
                    <div class="col-md-6 col-lg-4">
                        <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                            <!-- Input field -->
                            <label class="mb-1"><i class="bi bi-send me-2"></i>To</label>
                            <select class="form-select" data-search-enabled="true" formControlName="destination"
                                name="destination" [ngClass]="{'is-invalid': findTicketForm.controls['destination'].touched &&
                                findTicketForm.controls['destination'].errors?.['required']}">
                                <option [value]="0" disabled>Select Destination</option>
                                @for (item of destinationList; track $index) {
                                <option [value]="item.id">{{item.name}}</option>
                                }
                            </select>
                            <div class="text-danger">
                                @if (findTicketForm.controls['destination'].touched &&
                                findTicketForm.controls['destination'].errors?.['required']) {
                                <span>Select Destination</span>
                                }
                                <!-- @if(isSameToLocation){
                                <span>Try different destination</span>
                                } -->
                            </div>
                        </div>
                    </div>

                    <!-- Departure -->
                    <div class="col-lg-4">
                        <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                            <label class="mb-1"><i class="bi bi-calendar me-2"></i>Departure</label>
                            <input type="text" class="form-control flatpickr" data-date-format="d M Y"
                                placeholder="Select date" name="departureDate" formControlName="departureDate">
                        </div>
                        <div class="text-danger">
                            @if (findTicketForm.controls['departureDate'].touched &&
                            findTicketForm.controls['departureDate'].errors?.['required']) {
                            <span>Departure Date is required</span>
                            }
                        </div>
                    </div>

                    <div class="col-12 text-end pt-0">
                        <button type="button" class="btn btn-primary mb-n4" href="#" (click)="findTicket()">Find ticket
                            <i class="bi bi-arrow-right ps-3"></i></button>
                    </div>
                </div>
            </div>
            <!-- One way tab END -->

            <!-- Round way tab END -->
            <div class="tab-pane fade" id="pills-round-trip" role="tabpanel" aria-labelledby="pills-round-trip-tab"
                [ngClass]="{'active show': formService.isRoundedTrip}">
                <div class="row g-4">
                    <!-- Leaving From -->
                    <div class="col-md-6 col-xl-3 position-relative">
                        <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                            <!-- Input field -->
                            <label class="mb-1"><i class="bi bi-geo-alt me-2"></i>From</label>
                            <select class="form-select" data-search-enabled="true" formControlName="departure"
                                name="departure">
                                <option [value]="0" disabled>Select location</option>
                                @for (item of destinationList; track $index) {
                                <option [value]="item.id">{{item.name}}</option>
                                }
                            </select>
                        </div>

                        <!-- Auto fill button -->
                        <div class="btn-flip-icon mt-3 mt-md-0">
                            <button class="btn btn-white shadow btn-round mb-0"><i
                                    class="fa-solid fa-right-left"></i></button>
                        </div>
                    </div>

                    <!-- Going To -->
                    <div class="col-md-6 col-xl-3">
                        <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                            <!-- Input field -->
                            <label class="mb-1"><i class="bi bi-send me-2"></i>To</label>
                            <select class="form-select" data-search-enabled="true" formControlName="destination"
                                name="destination">
                                <option [value]="0" disabled>Select location</option>
                                @for (item of destinationList; track $index) {
                                <option [value]="item.id">{{item.name}}</option>
                                }
                            </select>
                        </div>
                    </div>

                    <!-- Departure -->
                    <div class="col-md-6 col-xl-3">
                        <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                            <label class="mb-1"><i class="bi bi-calendar me-2"></i>Departure</label>
                            <input type="text" class="form-control flatpickr" data-date-format="d M Y"
                                formControlName="departureDate" name="departureDate" placeholder="Select date">
                        </div>
                    </div>

                    <!-- Return -->
                    <div class="col-md-6 col-xl-3">
                        <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                            <label class="mb-1"><i class="bi bi-calendar me-2"></i>Return</label>
                            <input type="text" class="form-control flatpickr" data-date-format="d M Y"
                                formControlName="returnDate" name="returnDate" placeholder="Select date">
                        </div>
                    </div>

                    <div class="col-12 text-end pt-0">
                        <button class="btn btn-primary mb-n4" type="submit">Find
                            ticket
                            <i class="bi bi-arrow-right ps-3"></i></button>
                    </div>
                </div>
            </div>
            <!-- Round way tab END -->
        </div>
        <!-- Tab content END -->
    </div>
</form>